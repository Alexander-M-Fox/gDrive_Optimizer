<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: TreeViewComponent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: TreeViewComponent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {useEffect, useState} from 'react';
import Card from "react-bootstrap/Card";
import 'bootstrap/dist/css/bootstrap.min.css';
import './index.css';
import CircularProgress from '@material-ui/core/CircularProgress';

import TreeViewContent from "./TreeViewContent";

import {getRootChildren, getRootFolder} from "./services/rootFolder";
import {makeStyles} from "@material-ui/core/styles";

/**
 * @description The Google API key for our app.
 * */
const API_KEY = "[AIzaSyBcNCZZIEzsBOI8cyoj-Cb3e8lJe4Qg1Lk]"

/**
 * @description This represents the styles used for the CircularProgress component
 * */
const useStyles = makeStyles((theme) => ({
  circular_progress: {
    display: 'flex',
    '&amp; > * + *': {
      marginLeft: theme.spacing(2),
    },
  },
}));

/**
 * @description Represents the TreeViewComponent of our gDrive Optimizer App
 * */
function TreeViewComponent(props) {
  const classes = useStyles();

  // TODO: Mark these constants in the documentation
  /**
   * @description The list of files fetched from Google Drive.
   * */
  const [files, setFiles] = useState({});

  /**
   * @description State used to check if the root folder has been fetched from Drive.
   * */
  const [rootIsSet, setRootPresence] = useState(false);

  /**
   * @description This function is called when the component is first rendered.
   * */
  useEffect(() => {
    let mounted = true;
    getRootFolder(API_KEY, props.access_token)
      .then(response => response.json())
      .then(data => {
        if (mounted) {
          let newFiles = files
          newFiles.id = data.id
          newFiles.name = data.name
          newFiles.mimeType = data.mimeType
          newFiles.children = [{id: 'placeholder', name: 'placeholder_name'}]
          setFiles(newFiles)
          setRootPresence(true)
        }
      })
    return () => {
      mounted = false;
    };
  }, [files, props.access_token])

  /**
   * @description This function is called when the component is rendered and the root folder and it's metadata have been fetched.
   * */
  useEffect(() => {
    let mounted = true;
    if (rootIsSet) {
      getRootChildren(API_KEY, props.access_token, files.id)
        .then(response => response.json())
        .then(data => {
          if (mounted) {
            let newFiles = files
            newFiles.children = data.files
            setFiles(newFiles)
          }
        })
      return () => {
        mounted = false;
      };
    }
  }, [rootIsSet, props.access_token, files])

  return (
    &lt;Card style={{maxWidth: '75%'}}>
      &lt;Card.Body>
        &lt;Card.Title>Drive Content&lt;/Card.Title>
        {!files.id &amp;&amp; &lt;CircularProgress className={classes.circular_progress}/>}
        {files &amp;&amp; &lt;TreeViewContent files={files} access_token={props.access_token} user_email={props.user_email}
                                   api_key={API_KEY}/>}
      &lt;/Card.Body>
    &lt;/Card>
  )
}

/**
 * The TreeViewComponent module. It handles all operations of the TreeView functionality.
 * @module TreeViewComponent
 * */
export default TreeViewComponent;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-TreeViewComponent.html">TreeViewComponent</a></li><li><a href="module-TreeViewContent.html">TreeViewContent</a></li></ul><h3>Global</h3><ul><li><a href="global.html#API_KEY">API_KEY</a></li><li><a href="global.html#TreeViewComponent">TreeViewComponent</a></li><li><a href="global.html#TreeViewContent">TreeViewContent</a></li><li><a href="global.html#useStyles">useStyles</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Dec 04 2020 12:42:32 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
